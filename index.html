<html>
  <head>
    <meta charset="utf-8">
    <title>Linguist Colors</title>
    <script src="vendor/bower/jquery/dist/jquery.min.js"></script>
    <script src="vendor/bower/js-yaml/dist/js-yaml.min.js"></script>
    <script src="vendor/bower/mustache/mustache.min.js"></script>

    <link rel="stylesheet" href="vendor/bower/primer-css/css/primer.css">
    <link rel="stylesheet" href="vendor/bower/octicons/octicons/octicons.css">
    <link rel="stylesheet" href="css/site.css">
  </head>
  <body>
    <header>
      <div class="container">
        <h1><a href="/"><span class="mega-octicon octicon-logo-github"></span> Linguist</href></h1>
        <nav>
          <a href="https://github.com/github/linguist"><span class="mega-octicon octicon-mark-github"></span></a>
        </nav>
      </div>
    </header>

    <div class="container">
      <ul id="languages"></ul>
    </div>

    <script id="template" type="text/html">
      <li class="language" style="border-bottom-color: {{color}}">
        <h2 class="language-name">{{name}}</h2>

        {{#octicon}}
          <span class="language-type octicon octicon-{{octicon}}" title="{{type}}"></span>
        {{/octicon}}

        <ul class="extensions">
          {{#extensions}}
            <li>{{.}}</li>
          {{/extensions}}
        </ul>
      </li>
    </script>

    <script type="text/javascript">
      var $list = $("#languages");
      template = $("#template").text();

      var octiconMapping = {
        programming: "file-binary",
        data: "database",
        markup: "file-code",
        prose: "file-text"
      };

      $.get("https://rawgit.com/github/linguist/master/lib/linguist/languages.yml", function(data) {
        var languages = jsyaml.safeLoad(data);
        for(var language in languages) {
          var attrs = languages[language]
          attrs.name = language;
          attrs.octicon = octiconMapping[attrs.type];
          $list.append(Mustache.render(template, attrs));
        }
      });

    </script>
  </body>
</html>
